<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health and Fitness Form</title>
</head>
<body>
    <h1>Health and Fitness Form</h1>
    <form id="healthForm" action="/userFormDetails" method="post">

        <label for="Name">Name:</label><br>
        <input type="text" id="name" name="name" required><br><br>

        <label for="gender">Gender:</label><br>
        <input type="radio" id="male" name="gender" value="male" >
        <label for="male">Male</label><br>
        <input type="radio" id="female" name="gender" value="female">
        <label for="female">Female</label><br><br>

        <label for="age">Age:</label><br>
        <input type="number" id="age" name="age" required><br><br>

        <label for="activityLevel">Activity Level:</label><br>
        <select id="activityLevel" name="activityLevel">
            <option value="Little">Little</option>
            <option value="moderate">Moderate</option>
            <option value="active">Active</option>
        </select><br><br>

        <label for="goals">Fitness Goals:</label><br>
        <input type="checkbox" id="weightLoss" name="goals" value="weight-loss">
        <label for="weightLoss">Weight Loss</label><br>
        <input type="checkbox" id="muscleGain" name="goals" value="muscle-gain">
        <label for="muscleGain">Muscle Gain</label><br>
        <input type="checkbox" id="coachGuidance" name="goals" value="coach-guidance">
        <label for="coachGuidance">Coach Guidance</label><br>
        <input type="checkbox" id="calorieTracking" name="goals" value="calorie-tracking">
        <label for="calorieTracking">Calorie tracking</label><br>
        <input type="checkbox" id="dietPlan" name="goals" value="diet-plan">
        <label for="dietPlan">Diet Plan</label><br>
        <input type="checkbox" id="intermittentFasting" name="goals" value="intermittent-fasting">
        <label for="intermittentFasting">Intermittent Fasting</label><br>
        <input type="checkbox" id="workoutsYoga" name="goals" value="workouts-yoga">
        <label for="workoutsYoga">Workouts and Yoga</label><br>
        <input type="checkbox" id="maintenance" name="goals" value="maintenance">
        <label for="maintenance">Maintenance</label><br><br>

        <label for="height">Height (in cm):</label><br>
        <input type="number" id="height" name="height" required><br><br>

        <label for="weight">Weight (in kg):</label><br>
        <input type="number" id="weight" name="weight" required><br><br>

        <label for="tweight">Target Weight (in kg):</label><br>
        <input type="number" id="tweight" name="tweight" required><br><br>

        <label for="disease">Any medical condition we should be aware of?</label><br>
        <input type="checkbox" id="diabetes" name="disease" value="Diabetes">
        <label for="diabetes">Diabetes</label><br>
        <input type="checkbox" id="cholesterol" name="disease" value="Cholesterol">
        <label for="cholesterol">Cholesterol</label><br>
        <input type="checkbox" id="hypertension" name="disease" value="Hypertension">
        <label for="hypertension">Hypertension</label><br>
        <input type="checkbox" id="pCos" name="disease" value="PCos">
        <label for="pCos">PCos</label><br>
        <input type="checkbox" id="thyroid" name="disease" value="Thyroid">
        <label for="thyroid">Thyroid</label><br>
        <input type="checkbox" id="sleepIssues" name="disease" value="Sleep-issues">
        <label for="sleepIssues">Sleep issues</label><br>
        <input type="checkbox" id="depression" name="disease" value="Depression">
        <label for="depression">Depression</label><br>
        <input type="checkbox" id="physicalInjury" name="disease" value="Physical-Injury">
        <label for="physicalInjury">Physical Injury</label><br>
        <input type="checkbox" id="stress" name="disease" value="stress">
        <label for="stress">Stress</label><br>
        <input type="checkbox" id="loneliness" name="disease" value="Loneliness">
        <label for="loneliness">Loneliness</label><br><br>
        <label for="healthscore">Healthscore (out of 10):</label><br>
        <input type="number" id="healthscore" name="healthscore" required><br><br>

        <input type="hidden" id="email" name="email">

        <input type="submit" value="Submit">
    </form>
    <script type="module">

        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js";
        import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAOPZjFuX_9WWuVwso8RtEnY6W4ntt4ZBg",
            authDomain: "blissful-bites-9985b.firebaseapp.com",
            projectId: "blissful-bites-9985b",
            storageBucket: "blissful-bites-9985b.appspot.com",
            messagingSenderId: "1070336763456",
            appId: "1:1070336763456:web:d4eefe70dd2d4c53fd61a5",
            measurementId: "G-LWJW5JXMEL"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        auth.onAuthStateChanged(console.log)
        var email;
        onAuthStateChanged(auth, (user) => {
            if (user) {
                // User is signed in
                email = user.email
                console.log("User is signed in:", user);
                console.log(email);
                document.getElementById("email").value = email;
               
            } else {
                // No user is signed in
                console.log("No user is signed in");
                // You can handle this case, for example, redirecting the user to the login page
            }
        });

        console.log(email)
    </script>
</body>
</html>
